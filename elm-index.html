<!DOCTYPE HTML>
<html>
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="node_modules/bulma/css/bulma.min.css">
  <link rel="stylesheet" href="assets/syn-bulma.css">

 <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=IM+Fell+French+Canon:ital@1&display=swap" rel="stylesheet"> 
  <title>Song Designer!</title>
  <style>

/* body { padding: 0; margin: 0; } .font-expression { font-family: "IM Fell French Canon", cursive; } */

/* body { background : #e290ff }  */
/* body { background : #fd5800 } */
/* body { background : #00ff00 } */
/* body { background : #89cff0} */
 </style>
</head>


<body class="with-bulma">

<div class="section">
  <div id="mini-song-maker"></div>
  <!-- <div id="main-root"></div> -->
</div>

<div id="instrument-root"></div>
<audio id="audio-player"></audio>


<div id="demo-combo-intro"></div>
<div id="demo-combo-verse"></div>
<div id="demo-combo-chorus"></div>
<div id="demo-combo-outro"></div>
<div id="demo-layout"></div>

<div id="waveform"></div>
<pre id="elm"></pre>


<script src="elm-out.js"></script>
<script src="node_modules/wavesurfer.js/dist/wavesurfer.js"></script>

<script>


</script>


<script>

var mainRoot = document.getElementById("main-root")
var miniRoot = document.getElementById("mini-song-maker")

var songDesigner = mainRoot && Elm.Main.init( { flags: null, node: mainRoot });
var miniMaker = miniRoot && Elm.MiniMaker.init( { flags: null, node: miniRoot });

function initDemos () {
   Elm.Demos.init( { flags: {type_: "combo", detail: "intro"}, node: document.querySelector("#demo-combo-intro")} );

   Elm.Demos.init( { flags: {type_: "combo", detail: "verse"}, node: document.querySelector("#demo-combo-verse")} );

   Elm.Demos.init( { flags: {type_: "combo", detail: "chorus"}, node: document.querySelector("#demo-combo-chorus")} );

   Elm.Demos.init( { flags: {type_: "combo", detail: "outro"}, node: document.querySelector("#demo-combo-outro")} );


   Elm.Demos.init( { flags: {type_: "layout", detail: ""}, node: document.querySelector("#demo-layout")} );
}

// initDemos();

var wave = WaveSurfer.create({
    container: '#waveform',
    scrollParent: true
});

function playMusic() {
    wave.playPause();
}

function stopMusic() {
    wave.stop();
}


function pauseMusic() {
    wave.playPause();
}

function setSource(source) {
  wave.load(source);
  wave.on('ready', e => wave.play());
}

songDesigner.ports.playMusic.subscribe(playMusic);

songDesigner.ports.stopMusic.subscribe(stopMusic);

songDesigner.ports.pauseMusic.subscribe(pauseMusic);

songDesigner.ports.setSource.subscribe(setSource);




</script>
</body>
</html>
